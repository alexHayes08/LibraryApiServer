{
    "swagger": "2.0",
    "info": {
        "description": "A simple library api for retrieving/locking/unlocking resources.",
        "title": "Lockables API",
        "version": "1.0.0"
    },
    "host": "lockablesapi.appspot.com",
    "consumes":[
        "application/json"
    ],
    "produces": [
        "application/json"
    ],
    "schemes": [
        "https"
    ],
    "securityDefinitions": {
        "api_key": {
            "type": "apiKey",
            "name": "key",
            "in": "query"
        }
    },
    "security": [
        {
            "api_key": []
        }
    ],
    "paths": {
        "/api/version": {
            "get": {
                "description": "Returns the version of the server.",
                "operationId": "version",
                "produces": [
                    "application/json"
                ],
                "responses": {
                    "200": {
                        "description": "Echo",
                        "schema": {
                            "$ref": "#/definitions/versionResponse"
                        }
                    }
                }
            }
        },
        "/api/running": {
            "get": {
                "description": "Used to check if the server is running.",
                "operationId": "running",
                "responses": {
                    "200": {
                        "description": "Server is running."
                    }
                }
            }
        },
        "/api/lockable/create": {
            "post": {
                "description": "Creates a Lockable.",
                "operationId": "lockableCreate",
                "parameters": [
                    {
                        "in": "body",
                        "name": "lockable",
                        "schema": {
                            "$ref": "#/definitions/genericLockable"
                        }
                    }
                ],
                "produces": [
                    "application/json"
                ],
                "responses": {
                    "200": {
                        "description": "Successful lockable creation.",
                        "schema": {
                            "$ref": "#/definitions/lockable"
                        }
                    }
                }
            }
        },
        "/api/lockable/create-many": {
            "post": {
                "description": "Batch version of create.",
                "operationId": "lockableCreateMany",
                "parameters": [
                    {
                        "in": "body",
                        "name": "array_of_lockables",
                        "description": "Array of generic lockables to create.",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/createManyObject"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successfully creation of lockables.",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/lockable"
                            }
                        }
                    }
                }
            }
        },
        "/api/lockable/retrieve": {
            "post": {
                "description": "Retrieves a lockable.",
                "operationId": "lockableRetrieve",
                "parameters": [
                    {
                        "in": "body",
                        "name": "retrievalInformation",
                        "schema": {
                            "$ref": "#/definitions/retrieveRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successfully retrieved a lockable.",
                        "schema": {
                            "$ref": "#/definitions/lockable"
                        }
                    },
                    "400": {
                        "description": "Method in request body not supported."
                    },
                    "404": {
                        "description": "Failed to locate any lockable matching the value."
                    }
                }
            }
        },
        "/api/lockable/retrieve/readonly": {
            "post": {
                "description": "Retrieves the latest lockable that can have a readonly lock applied to it.",
                "operationId": "lockableRetrieveReadonly",
                "parameters": [
                    {
                        "in": "body",
                        "name": "retrievalInformation",
                        "schema": {
                            "$ref": "#/definitions/unlockedRetrievalRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successfully retrieved a lockable.",
                        "schema": {
                            "$ref": "#/definitions/lockable"
                        }
                    },
                    "400": {
                        "description": "Method in request body not supported."
                    },
                    "404": {
                        "description": "Failed to locate any lockable matching the value."
                    },
                    "500": {
                        "description": "Internal error occurred."
                    }
                }
            }
        },
        "/api/lockable/retrieve/readwrite": {
            "post": {
                "description": "Retrieves the latest lockable that can have a readwrite lock applied to it.",
                "operationId": "lockableRetrieveReadwrite",
                "parameters": [
                    {
                        "in": "body",
                        "name": "retrievalInformation",
                        "schema": {
                          "$ref": "#/definitions/unlockedRetrievalRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successfully retrieved a lockable.",
                        "schema": {
                            "$ref": "#/definitions/lockable"
                        }
                    },
                    "400": {
                        "description": "Method in request body not supported."
                    },
                    "404": {
                        "description": "Failed to locate any lockable matching the value."
                    },
                    "500": {
                        "description": "Internal error occurred."
                    }
                }
            }
        },
        "/api/lockable/update": {
            "put": {
                "description": "Updates a lockable.",
                "operationId": "lockableUpdate",
                "parameters": [
                    {
                        "in": "body",
                        "name": "lockable",
                        "schema": {
                            "$ref": "#/definitions/lockable"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successfully updated the lockable.",
                        "schema": {
                            "$ref": "#/definitions/lockable"
                        }
                    }
                }
            }
        },
        "/api/lockable/update-many": {
            "put": {
                "description": "Updates a lockable.",
                "operationId": "lockableUpdateMany",
                "parameters": [
                    {
                        "in": "body",
                        "name": "lockable",
                        "schema": {
                            "type": "object",
                            "properties": {
                                "lockables": {
                                    "type": "array",
                                    "items": {
                                      "$ref": "#/definitions/lockable"
                                    }
                                }
                            }
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successfully updated the lockables.",
                        "schema": {
                            "$ref": "#/definitions/lockablePaginationResults"
                        }
                    }
                }
            }
        },
        "/api/lockable/delete": {
            "post": {
                "description": "Delete a lockable.",
                "operationId": "lockableDelete",
                "parameters": [
                    {
                        "in": "body",
                        "name": "retrievalInformation",
                        "schema": {
                            "$ref": "#/definitions/retrieveRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successfully deleted the lockable."
                    }
                }
            }
        },
        "/api/lockable/delete-many": {
            "post": {
                "description": "Delete a lockable.",
                "operationId": "lockableDeleteMany",
                "parameters": [
                    {
                        "in": "body",
                        "name": "retrievalInformation",
                        "schema": {
                            "type": "object",
                            "properties": {
                                "field": {
                                    "type": "string"
                                },
                                "values": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/definitions/retrieveRequest"
                                    }
                                }
                            }
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successfully deleted the lockables."
                    }
                }
            }
        },
        "/api/lockable/paginate": {
            "post": {
                "description": "Paginate over lockables.",
                "operationId": "lockablePaginate",
                "parameters": [
                    {
                        "in": "body",
                        "name": "paginateDate",
                        "schema": {
                            "$ref": "#/definitions/paginate"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successfully applied paginate data and found results.",
                        "schema": {
                            "$ref": "#/definitions/lockablePaginationResults"
                        }
                    }
                }
            }
        },
        "/api/lockable/lock": {
            "post": {
                "description": "Applies a lock to a lockable.",
                "operationId": "lockableLock",
                "parameters": [
                    {
                        "in": "body",
                        "name": "lockAndLockableData",
                        "schema": {
                            "$ref": "#/definitions/lockLockable"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successfully added a lock.",
                        "schema": {
                            "$ref": "#/definitions/lockable"
                        }
                    }
                }
            }
        },
        "/api/lockable/unlock": {
            "post": {
                "description": "Remove a lock from the lockable.",
                "operationId": "lockableUnlock",
                "parameters": [
                    {
                        "in": "body",
                        "name": "lockAndLockableData",
                        "schema": {
                            "type": "object",
                            "properties": {
                                "lockId": {
                                    "type": "string"
                                },
                                "lockableId": {
                                    "type": "string"
                                }
                            }
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successfully removed the lock from the lockable.",
                        "schema": {
                            "$ref": "#/definitions/lockable"
                        }
                    }
                }
            }
        },
        "/api/inactive-lock/{id}": {
            "get": {
                "description": "Retrieves a lock by id.",
                "operationId": "lockGetIaactiveLockById",
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "type": "string",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successfully retrieved a lock matching the id.",
                        "schema": {
                            "$ref": "#/definitions/lock"
                        }
                    }
                }
            }
        },
        "/api/inactive-locks": {
            "post": {
                "description": "Paginate over inactive locks.",
                "operationId": "lockPaginate",
                "parameters": [
                    {
                        "in": "body",
                        "name": "lockPaginationData",
                        "schema": {
                            "$ref": "#/definitions/paginate"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successfully retrieved locks with the paginate data.",
                        "schema": {
                            "$ref": "#/definitions/lockPaginationResults"
                        }
                    }
                }
            }
        }
    },
    "definitions": {
        "unlockedRetrievalRequest": {
          "type": "object",
          "required": [
            "categories"
          ],
          "properties": {
            "categories": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          }
        },
        "createManyObject": {
            "type": "object",
            "properties": {
                "lockables": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/genericLockable"
                    }
                }
            }
        },
        "lockPaginationResults": {
            "type": "object",
            "required": [
                "results"
            ],
            "properties": {
                "results": {
                    "$ref": "#/definitions/lock"
                },
                "next": {
                    "$ref": "#/definitions/paginate"
                },
                "previous": {
                    "$ref": "#/definitions/paginate"
                }
            }
        },
        "lockLockable": {
            "type": "object",
            "required": [
                "lock",
                "lockableId"
            ],
            "properties": {
                "lock": {
                    "$ref": "#/definitions/genericLock"
                },
                "lockableId": {
                    "type": "string"
                }
            }
        },
        "lockablePaginationResults": {
            "type": "object",
            "required": [
                "results"
            ],
            "properties": {
                "results": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/lockable"
                    }
                },
                "next": {
                    "$ref": "#/definitions/paginate"
                },
                "previous": {
                    "$ref": "#/definitions/paginate"
                }
            }
        },
        "filter": {
            "type": "object",
            "required": [
                "field",
                "comparator",
                "value"
            ],
            "properties": {
                "field": {
                    "type": "string"
                },
                "comparator": {
                    "type": "string"
                },
                "value": {
                    "type": "object"
                }
            }
        },
        "orderBy": {
            "required": [
                "fieldPath"
            ],
            "type": "object",
            "properties": {
                "fieldPath": {
                    "type": "string"
                },
                "directionStr": {
                    "type": "string"
                }
            }
        },
        "paginate": {
            "type": "object",
            "required": [
                "limit"
            ],
            "properties": {
                "orderBy": {
                    "$ref": "#/definitions/orderBy"
                },
                "limit": {
                    "type": "number"
                },
                "skip": {
                    "type": "number"
                },
                "filter": {
                    "$ref": "#/definitions/filter"
                }
            }
        },
        "retrieveRequest": {
            "type": "object",
            "required": [
                "field",
                "value"
            ],
            "properties": {
                "field": {
                    "type": "string"
                },
                "value": {
                    "type": "object"
                }
            }
        },
        "versionResponse": {
            "type": "object",
            "properties": {
                "version": {
                    "type": "string"
                }
            }
        },
        "genericLock": {
            "type": "object",
            "required": [
                "lockedAt",
                "maxLeaseDate",
                "ownerToken",
                "isShared"
            ],
            "properties": {
                "lockedAt": {
                    "type": "string"
                },
                "maxLeaseDate": {
                    "type": "string"
                },
                "ownerToken": {
                    "type": "string"
                },
                "isShared": {
                  "type": "boolean"
                }
            }
        },
        "genericLockable": {
            "type": "object",
            "properties": {
                "name": {
                    "type": "string"
                },
                "createdOn": {
                    "type": "string"
                },
                "categories": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                },
                "data": {
                    "type": "object"
                }
            }
        },
        "lockable": {
            "type": "object",
            "required": [
                "id",
                "name",
                "createdOn",
                "categories",
                "locks"
            ],
            "properties": {
                "id": {
                    "type": "string"
                },
                "name": {
                    "type": "string"
                },
                "createdOn": {
                    "type": "object"
                },
                "categories": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "locks": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/lock"
                    }
                },
                "data": {
                    "type": "object"
                }
            }
        },
        "lock": {
            "type": "object",
            "required": [
                "id",
                "isShared",
                "ownerToken",
                "maxLeaseDate"
            ],
            "properties": {
                "id": {
                    "type": "string"
                },
                "isShared": {
                    "type": "boolean"
                },
                "ownerToken": {
                    "type": "string"
                },
                "lockedAt": {
                    "type": "string"
                },
                "maxLeaseDate": {
                    "type": "string"
                }
            }
        }
    }
}